{"ts":1347285194410,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1347285196334,"patch":[[{"diffs":[[1,"<!doctype html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta charset=\"UTF-8\">\r\n<title>Piksel</title>\r\n<script type=\"text/javascript\">\r\n\r\nwindow.addEventListener('load', eventWindowLoaded, false);\r\nfunction eventWindowLoaded() {\r\n   canvasApp();\r\n}\r\n\r\nfunction canvasSupport () {\r\n     return true;\r\n}\r\n\r\nvar screenWidth = 10;\r\nvar screenHeight = 20;\r\nvar map = new map();\r\n\r\nfunction canvasApp(){\r\nif (!canvasSupport()) {\r\n          return;\r\n     }else{\r\n    \trestart();\r\n   }\r\n}\r\n\r\nfunction box(color, x ,y){\r\n\tthis.color = color;\r\n\tthis.width = 20;\r\n\tthis.height = 20;\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.active = false;\r\n\t\r\n\tthis.draw = function(context){\r\n\t\tif(this.color == 1)\r\n\t\t\tcontext.fillStyle = '#ff0000';\r\n\t\telse if(this.color == 2)\r\n\t\t\tcontext.fillStyle = '#00ff00';\r\n\t\telse if(this.color == 3)\r\n\t\t\tcontext.fillStyle = '#0000ff';\r\n\t\telse if(this.color == 4)\r\n\t\t\tcontext.fillStyle = '#ff00ff';\r\n\t\telse if(this.color == 5)\r\n\t\t\tcontext.fillStyle = '#ffff00';\r\n\t\telse if(this.color == 6)\r\n\t\t\tcontext.fillStyle = '#00ffff';\r\n\t\tcontext.fillRect(x*this.width, y*this.height, this.width, this.height);\r\n\t}\r\n}\r\n\r\nfunction map(){\r\n\tthis.boxWidth = 20;\r\n\tthis.boxHeight = 20;\r\n\tthis.step = 0;\r\n\tthis.mapArray = new Array(screenWidth);\r\n\tthis.initialize = function(){\r\n\t\tthis.step = 0;\r\n\t\tfor(var i = 0; i < screenWidth; i++){\r\n\t\t\tthis.mapArray[i] = new Array(screenHeight);\r\n\t\t\tfor(var j = 0; j < screenHeight; j++){\r\n\t\t\t\tthis.mapArray[i][j] = new box(Math.floor(Math.random()*6)+1, i, j);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.mapArray[0][0].active = true;\r\n\t}\r\n\t\r\n\tthis.draw = function(){\r\n\t\tconsole.log('drawing...');\r\n\t\tvar theCanvas = document.getElementById(\"canvas\");\r\n\t\tvar context = theCanvas.getContext(\"2d\");\r\n\t\tcontext.clearRect(0, 0, 500, 600);\r\n\t\tfor(var i = 0; i < screenWidth; i++){\r\n\t\t\tfor(var j = 0; j < screenHeight; j++){\r\n\t\t\t\tvar box = this.mapArray[i][j];\r\n\t\t\t\tbox.draw(context);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar stepDiv = document.getElementById(\"step\");\r\n\t\tstepDiv.innerHTML = 'Step = ' + this.step;\r\n\t}\r\n\t\r\n\tthis.changeActiveColor = function(color){\r\n\t\tfor(var i = 0; i < screenWidth; i++){\r\n\t\t\tfor(var j = 0; j < screenHeight; j++){\r\n\t\t\t\tvar box = this.mapArray[i][j];\r\n\t\t\t\tif(box.active){\r\n\t\t\t\t\tthis.checkNeighbours(color, i, j);\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(var i = 0; i < screenWidth; i++){\r\n\t\t\tfor(var j = 0; j < screenHeight; j++){\r\n\t\t\t\tvar box = this.mapArray[i][j];\r\n\t\t\t\tif(box.active){\r\n\t\t\t\t\tbox.color = color;\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.step++;\r\n\t\tthis.draw();\r\n\t}\r\n\t\r\n\tthis.checkNeighbours = function(color, x, y){\r\n\t\tif(x > 0){\r\n\t\t\tif(this.mapArray[x-1][y].color == color){\r\n\t\t\t\tthis.mapArray[x-1][y].active = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(x < screenWidth-1){\r\n\t\t\tif(this.mapArray[x+1][y].color == color){\r\n\t\t\t\tthis.mapArray[x+1][y].active = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(y > 0){\r\n\t\t\tif(this.mapArray[x][y-1].color == color){\r\n\t\t\t\tthis.mapArray[x][y-1].active = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(y < screenHeight-1){\r\n\t\t\tif(this.mapArray[x][y+1].color == color){\r\n\t\t\t\tthis.mapArray[x][y+1].active = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction clickColor(colorCode){\r\n\tmap.changeActiveColor(colorCode);\r\n}\r\n\r\nfunction restart(){\r\n\tmap.initialize();\r\n\tmap.draw();\r\n}\r\n</script>\r\n</head>\r\n<body>\r\n<div>\r\n<input type=\"button\" value=\"New Game\" onclick=\"javascript:restart()\" />\r\n</div>\r\n<div id=\"step\">\r\nStep = 0\r\n</div>\r\n<div style=\"top: 50px; left: 50px;\">\r\n<canvas id=\"canvas\" width=\"500\" height=\"400\">\r\n Your browser does not support HTML5 Canvas.\r\n</canvas>\r\n</div>\r\n<div>\r\n<input type=\"button\" onclick=\"javascript:clickColor(1)\" style=\"background-color:#ff0000; width:60px; height:60px\" />\r\n<input type=\"button\" onclick=\"javascript:clickColor(2)\" style=\"background-color:#00ff00; width:60px; height:60px\" />\r\n<input type=\"button\" onclick=\"javascript:clickColor(3)\" style=\"background-color:#0000ff; width:60px; height:60px\" />\r\n<input type=\"button\" onclick=\"javascript:clickColor(4)\" style=\"background-color:#ff00ff; width:60px; height:60px\" />\r\n<input type=\"button\" onclick=\"javascript:clickColor(5)\" style=\"background-color:#ffff00; width:60px; height:60px\" />\r\n<input type=\"button\" onclick=\"javascript:clickColor(6)\" style=\"background-color:#00ffff; width:60px; height:60px\" />\r\n</div>\r\n</body>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":4162}]],"length":4162,"saved":false}
